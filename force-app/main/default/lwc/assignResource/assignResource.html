<template>
    <div class="c-container">
        <lightning-layout multiple-rows class="slds-box my-border">
        
        <!-- formulario de seleccion de recurso -->
            <lightning-layout-item padding="around-small " class="my-lli slds-m-right_x-large" size="4">
                <h1 class="my-title slds-p-horizontal_large slds-align_absolute-center" if:true={selectedProjectLineItem}>Esta seleccionando
                    Resource del Rol, {plrfilteredrol} Hs totales a cubrir {plrfilteredHsaCubrir}</h1>
                <h1 class="my-title slds-p-horizontal_large slds-align_absolute-center" if:false={selectedProjectLineItem}>Seleccione el Resourso por Rol </h1>
                <br>
                <br>
                Productos Presupuestados
                <lightning-combobox class="slds-align-middle my-text-color-input" placeholder="All Roles"
                    options={projectLineItemsOptions} onchange={handleProjectLineItemsChange}
                    value={selectedProjectLineItem} required>
                </lightning-combobox>
                <br>
                Resource 
                <lightning-combobox class="slds-align-middle my-text-color-input" placeholder="All Resources"
                    options={resourcefilteredOptions} onchange={handleResourcePerRoleChange} value={selectedResource}
                    required>
                </lightning-combobox>
                <hr>
                Start Date
                <lightning-input class="my-text-color-input" type="date" name="startDateName" label="" value={StartDateValue}
                     min={startDateOfProject} max={endDateOfProject} onchange={handleStartDateChange}
                    message-when-value-missing="This field is required" required></lightning-input>
                    <br>
                End Date
                <lightning-input class="my-text-color-input" type="date" name="endDateName" label="" value={EndDateValue}
                    min={startDateOfProject} max={endDateOfProject} onchange={handleEndDateChange}
                    message-when-value-missing="This field is required" required></lightning-input>
                <hr>
                Is Squad Lead
                <lightning-input type="checkbox" label="" unchecked name="squadLead" onchange={handleIsSqualeaderChange}>
                </lightning-input>
                <hr>

               
                <lightning-button class="slds-float_left" variant="brand-outline" label="Asignar"
                    title="titleName" onclick={handleAssignTemporalSubmit}>
                </lightning-button>
                <div if:true={validationWarning1} >
                    <br>     
                    <hr>
                                   
                    <div style="color:rgb(9, 1, 70); background:#0b76d3">
                        <h2 > {validationWarning1}</h2>
                </div>
                </div>
               
            </lightning-layout-item>
            
            <!-- componente de card de resources alocados -->
            <lightning-layout-item padding="around-small " class="my-lli" size="7">
                <h1 class="my-title slds-p-horizontal_large slds-align_absolute-center">Section card Resource Asignament</h1>
                <div class="c-container">
                  
                </div>
            </lightning-layout-item>
        </lightning-layout>

        <br>

        <!-- componente q renderea los recursos para agregar en la operacion bullck -->

        <lightning-layout if:true={mapaParseado} multiple-rows class="slds-box my-border-assignament">
            <lightning-layout-item padding="around-small" class="custom-box slds-m-bottom_small my-lli" size="12">
                <h1 class="my-style-person-assignament my-title-resource">Resources a asignar al proyecto</h1>
                <div class="my-resources-title contenedor ">
                    <h2 class="col-7-cabecera">Role</h2>
                    <h2 class="col-7-cabecera">Resource</h2>
                    <h2 class="col-7-cabecera">Start Date</h2>
                    <h2 class="col-7-cabecera">End Date</h2>
                    <h2 class="col-7-cabecera">Alloc/Hs</h2>
                    <h2 class="col-7-cabecera">Cost</h2>
                    <h2 class="col-7-cabecera">Squad L</h2>
                    <h2 class="col-7-cabecera">Remove</h2>
                </div>
                <br>
                
                <template for:each={mapassignedselectedView} for:item="assigneditem">
                
                    <div class="c-container" key={assigneditem.Id}>
                        <div class="my-resources-AllResources">
                            <h2>{assigneditem.ProjectLineItem}</h2>
                            <h2>{assigneditem.Resource}</h2>
                            <h2>{assigneditem.StartDate}</h2>
                            <h2>{assigneditem.EndDate}</h2>
                            <!-- <h2>${assigneditem.ResourceRate}</h2> -->
                            <h2>{assigneditem.AllocatedHours} Hrs.</h2>
                            <h2>$ {assigneditem.estimatedCost}</h2>
                            
                            <span if:true={assigneditem.IsSquadLeader} class="my-check-ok">
                                <i class="my-check-ok"></i>
                            </span>
                            <span if:false={assigneditem.IsSquadLeader}> -
                            </span>
                            <lightning-button variant="destructive" label="=> " title="titleName" icon-name="utility:delete" icon-position="right" onclick={handleClick} data-id={assigneditem.Id}>
                            </lightning-button>
                        </div>
                        <hr>
                    </div>

                </template>
                <lightning-button class="slds-float_right" variant="brand-outline" label="Asignar Resources"
                    title="titleName" onclick={handleasignamentResources}>
                </lightning-button>
            </lightning-layout-item>
        </lightning-layout>

        <br>


        <lightning-layout multiple-rows class="slds-box my-border">
            <lightning-layout-item class="custom-box slds-m-bottom_small my-lli" size="12" key={plitem.Id}>
                <h1 class="my-title slds-p-horizontal_large slds-align_absolute-center">Recursos ya asignados a este proyecto:</h1>
            </lightning-layout-item>


            <template for:each={allProjectLineItems} for:item="plitem">

                
                <lightning-layout-item class="custom-box slds-m-bottom_small my-lli" size="12" key={plitem.Id}>
                    <h1 class="my-style-person my-title-resource">{plitem.Role__c} - Horas a Cubrir :
                        "{plitem.Quantity_hours__c} Hours"</h1>
                    <div class="my-resources-title contenedor">
                        <h2 class="col-7-cabecera">Resources</h2>
                        <h2 class="col-7-cabecera">Start Date</h2>
                        <h2 class="col-7-cabecera">End Date</h2>
                        <h2 class="col-7-cabecera">hs alocated</h2>
                        <h2 class="col-7-cabecera">Cost</h2>
                        <h2 class="col-7-cabecera">Squad Lead</h2>
                        <h2 class="col-7-cabecera">Remove</h2>
                        <h2 class="col-7-cabecera">Edit</h2>
                    </div>
                    <c-assign-child plitem={plitem} ></c-assign-child>
                </lightning-layout-item>
            </template>
        </lightning-layout>

    </div>
</template>