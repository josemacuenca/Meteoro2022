<template>
    <div class="c-container">
        <lightning-layout multiple-rows class="slds-box my-border">
        
        <!-- formulario de seleccion de recurso -->
            <lightning-layout-item padding="around-small " class="my-lli">
                <h1 class="my-title slds-p-horizontal_large" if:true={selectedProjectLineItem}>Esta seleccionando
                    Resource del Rol {selectedProjectLineItem}</h1>
                <h1 class="my-title slds-p-horizontal_large" if:false={selectedProjectLineItem}>Seleccion el Resource
                    por Rol </h1>
                <br>
                <br>
                Project Line Item
                <lightning-combobox class="slds-align-middle my-text-color-input" placeholder="All Roles"
                    options={projectLineItemsOptions} onchange={handleProjectLineItemsChange}
                    value={selectedProjectLineItem} required>
                </lightning-combobox>
                <br>
                Resource and $ x hour
                <lightning-combobox class="slds-align-middle my-text-color-input" placeholder="All Resources"
                    options={resourcefilteredOptions} onchange={handleResourcePerRoleChange} value={selectedResource}
                    required>
                </lightning-combobox>
                <hr>
                Start Date
                <lightning-input class="my-text-color-input" type="date" name="startDateName" label=""
                    value="2017-09-07" min="2017-09-05" max="2017-09-22" onchange={handleStartDateChange}
                    message-when-value-missing="This field is required" required></lightning-input>
                End Date
                <lightning-input class="my-text-color-input" type="date" name="endDateName" label="" value="2017-09-07"
                    min="2017-09-05" max="2017-09-22" onchange={handleEndDateChange}
                    message-when-value-missing="This field is required" required></lightning-input>
                <hr>
                Is Squad Lead
                <lightning-input type="checkbox" label="" name="squadLead" onchange={handleIsSqualeaderChange}>
                </lightning-input>
                <hr>

                <button class="my-boton" onclick={handleAssignTemporalSubmit}>
                    <span class="my-text-boton">Asignar</span>
                    <i class="my-icon"></i>
                </button>
            </lightning-layout-item>
            
            <!-- componente de card de resources alocados -->
            <lightning-layout-item padding="around-small " class="my-lli">
            
            </lightning-layout-item>
        </lightning-layout>

        <br>

        <!-- componente q renderea los recursos para agregar en la operacion bullck -->

        <lightning-layout if:true={mapaParseado} multiple-rows class="slds-box my-border-assignament">
            <lightning-layout-item padding="around-small" class="custom-box slds-m-bottom_small my-lli" size="12">
                <h1 class="my-style-person-assignament my-title-resource">Resources a asignar al proyecto</h1>
                <div class="my-resources-title slds-border_bottom">
                    <h2>Role</h2>
                    <h2>Resource</h2>
                    <h2>Rate/H</h2>
                    <h2>Start Date</h2>
                    <h2>End Date</h2>
                    <h2>Squad Lead</h2>
                    <h2>Remove</h2>
                </div>
                <br>
                <!-- class="my-resources-AllResources" -->
                <template for:each={mapassignedselectedView} for:item="assigneditem">

                    <div class="c-container" key={assigneditem.Id}>
                        <div class="my-resources-AllResources">
                            <h2>{assigneditem.ProjectLineItem}</h2>
                            <h2>{assigneditem.Resource}</h2>
                            <h2>{assigneditem.ResourceRate}</h2>
                            <h2>{assigneditem.StartDate}</h2>
                            <h2>{assigneditem.EndDate}</h2>
                            <span if:true={assigneditem.IsSquadLeader} class="my-check-ok">
                                <i class="my-check-ok"></i>
                            </span>
                            <span if:false={assigneditem.IsSquadLeader}>
                            </span>
                            <lightning-button variant="brand-outline" label="X" title="titleName" onclick={handleClick}>
                            </lightning-button>
                        </div>
                        <hr>
                    </div>

                </template>
                <lightning-button class="slds-float_right" variant="brand-outline" label="Asignar Resources"
                    title="titleName" onclick={traer}>
                </lightning-button>
            </lightning-layout-item>
        </lightning-layout>

        <br>

        <lightning-layout multiple-rows class="slds-box my-border">
            <template for:each={allProjectLineItems} for:item="plitem">
                <lightning-layout-item class="custom-box slds-m-bottom_small my-lli" size="12" key={plitem.Id}>
                    <h1 class="my-style-person my-title-resource">{plitem.Role__c} - Horas a Cubrir :
                        "{plitem.Quantity_hours__c} Hours"</h1>
                    <div class="my-resources-title slds-border_bottom">
                        <h2>Resources</h2>
                        <h2>Rate/H</h2>
                        <h2>Start Date</h2>
                        <h2>End Date</h2>
                        <h2>Squad Lead</h2>
                        <h2>Remove</h2>
                        <h2>Edit</h2>
                    </div>
                    <c-assign-child plitem={plitem}></c-assign-child>
                </lightning-layout-item>
            </template>
        </lightning-layout>

    </div>
</template>